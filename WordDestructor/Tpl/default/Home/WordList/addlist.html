	<div>
		<h3>新增词单</h3>
		<form id=addlist action="<?php echo U('Home-Wordlist/addList');?>" method=post>
			<div id=lname>
				<label>词单名称</label><input type=text name=listName /><label class=hint></label>
			</div>
			<div id=wordnum>
				<label>单词数量</label><input type=text name=wordsnumber /><label class=hint></label>
			</div>
			<div id=memconf>
				<label>记忆偏好</label><input type=text name=memConf /><label class=hint></label>
			</div>
			<div id=libid>
				<input type=hidden name=librID value={$libraryID} />
			</div>
			<div id=submit>
				<button>创建</button><label class=hint></label>
			</div>
		</form>
	</div>
<script type=text/javascript>
flag = true;
$("#lname input").blur(function(){
	if($(this).val()==""){ $("#lname .hint").text("词单名字不能为空");flag = false;}
	else{ $.get("{:U('Home-Wordlist/isListExist/listname/');}"+$(this).val(),function(str){
			if(str == '1'){ $("#lname .hint").text("该此单名字已经存在");flag=false;}
			else{ $("#lname .hint").text("该词单名可以使用");flag=true;}});}
});
$("#wordnum input").blur(function(){
	if($(this).val()=="" || isNaN($(this).val())){ $("#wordnum .hint").text("单词数量必须为数字");flag=false;}
	else{
		$("#wordnum .hint").text("");flag=true;
	}
});

$("#submit button").click(function(){
	
	$("#lname input").blur();
	$("#wordnum input").blur();
	if(!flag) {
		$("#submit .hint").text("信息不符合要求");
		return false;
	}else{
	$.post($("#addlist").attr("action"), $("#addlist").serialize(), 
		function(str){
			if (!isNaN(parseInt(str))) {
				id = parseInt(str);
				$("#repo").load("{:U('Home-Wordlist/viewList/listID/');}"+id);
			}
			else $("#repo").html(str);
		});
	}
	return false;
});

</script>
